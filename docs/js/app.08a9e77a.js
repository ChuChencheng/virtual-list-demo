(function(t){function i(i){for(var a,r,l=i[0],o=i[1],c=i[2],h=0,d=[];h<l.length;h++)r=l[h],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(i);while(d.length)d.shift()();return s.push.apply(s,c||[]),e()}function e(){for(var t,i=0;i<s.length;i++){for(var e=s[i],a=!0,l=1;l<e.length;l++){var o=e[l];0!==n[o]&&(a=!1)}a&&(s.splice(i--,1),t=r(r.s=e[0]))}return t}var a={},n={app:0},s=[];function r(i){if(a[i])return a[i].exports;var e=a[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,i,e){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,i){if(1&i&&(t=r(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var a in t)r.d(e,a,function(i){return t[i]}.bind(null,a));return e},r.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="/virtual-list-demo/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=i,l=l.slice();for(var c=0;c<l.length;c++)i(l[c]);var u=o;s.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("56d7")},"034f":function(t,i,e){"use strict";var a=e("85ec"),n=e.n(a);n.a},"218c":function(t,i,e){"use strict";var a=e("f0db"),n=e.n(a);n.a},4575:function(t,i,e){},"4c2b":function(t,i,e){"use strict";var a=e("4dd7"),n=e.n(a);n.a},"4dd7":function(t,i,e){},"56d7":function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");for(var a=e("2b0e"),n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"tab-switch"},[e("button",{class:{active:"NormalList"===t.tab},on:{click:function(i){t.tab="NormalList"}}},[t._v("定高普通列表")]),e("button",{class:{active:"VirtualList"===t.tab},on:{click:function(i){t.tab="VirtualList"}}},[t._v("定高虚拟列表")]),e("button",{class:{active:"PropHeight"===t.tab},on:{click:function(i){t.tab="PropHeight"}}},[t._v("不定高 Prop 传入高度的虚拟列表")]),e("button",{class:{active:"VirtualListSetData"===t.tab},on:{click:function(i){t.tab="VirtualListSetData"}}},[t._v("使用方法设置数据的虚拟列表")])]),e(t.tab,{ref:"list",tag:"component",attrs:{data:t.data,itemHeightGetter:t.itemHeightGetter}})],1)},s=[],r=(e("0d03"),e("d3b7"),e("25f0"),function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container",staticStyle:{width:"200px",height:"300px"}},t._l(t.data,(function(i){return e("div",{key:i.id,staticClass:"list-item",style:{height:t.itemHeight+"px"}},[t._v(t._s(i.value))])})),0)}),l=[],o=(e("a9e3"),{name:"NormalList",props:{data:{type:Array,default:function(){return[]}},itemHeight:{type:Number,default:30}}}),c=o,u=(e("4c2b"),e("2877")),h=Object(u["a"])(c,r,l,!1,null,"3a627d3a",null),d=h.exports,f=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container",staticStyle:{width:"200px",height:"300px"},on:{"&scroll":function(i){return t.handleScroll(i)}}},[e("div",{staticClass:"total-list",style:{height:t.itemHeight*t.data.length+"px"}}),e("div",{staticClass:"visible-list",style:{transform:"translateY("+t.topHeight+"px)"}},t._l(t.visibleList,(function(i){return e("div",{key:i.id,staticClass:"visible-list-item",style:{height:t.itemHeight+"px"}},[t._v(t._s(i.value))])})),0)])},p=[],g=(e("fb6a"),{name:"VirtualList",props:{data:{type:Array,default:function(){return[]}},itemHeight:{type:Number,default:30}},data:function(){return{visibleList:[],topHeight:0}},methods:{updateVisibleList:function(){var t=this.$el.scrollTop,i=Math.ceil(this.$el.clientHeight/this.itemHeight)+1,e=Math.floor(t/this.itemHeight);this.visibleList=this.data.slice(e,e+i),this.topHeight=e*this.itemHeight},handleScroll:function(){this.updateVisibleList()}},mounted:function(){this.updateVisibleList()},watch:{data:function(){this.updateVisibleList()}}}),v=g,b=(e("a4e9"),Object(u["a"])(v,f,p,!1,null,"3ffa9a2e",null)),m=b.exports,H=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container",staticStyle:{width:"200px",height:"300px"},on:{"&scroll":function(i){return t.handleScroll(i)}}},[e("div",{staticClass:"total-list",style:{height:t.totalHeight+"px"}}),e("div",{staticClass:"visible-list",style:{transform:"translateY("+t.topHeight+"px)"}},t._l(t.visibleList,(function(i){return e("div",{key:i.id,staticClass:"visible-list-item",style:{height:(t.itemHeightRecord[i.index]||t.itemHeight)+"px"}},[t._v(t._s(i.value))])})),0)])},y=[],L={name:"PropHeight",props:{data:{type:Array,default:function(){return[]}},itemHeight:{type:Number,default:30},itemHeightGetter:{type:Function,default:function(){return 30}}},data:function(){return{visibleList:[],itemHeightRecord:[],totalHeight:0,topHeight:0}},methods:{updateTotalHeight:function(){for(var t=0,i=this.data.length,e=0;e<i;e++)t+=this.itemHeightRecord[e]||this.itemHeight;this.totalHeight=t},updateVisibleList:function(){var t=this.$el.scrollTop,i=0,e=0;while(e<t){if(e+(this.itemHeightRecord[i]||this.itemHeight)>=t)break;e+=this.itemHeightRecord[i]||this.itemHeight,i++}var a=this.$el.clientHeight,n=i,s=0,r=this.itemHeightRecord[i]||(this.itemHeightRecord[i]=this.itemHeightGetter(i));while(s-r<a&&n<this.data.length){var l=this.itemHeightRecord[n]||this.itemHeightGetter(n);this.$set(this.itemHeightRecord,n,l),s+=l,n++}this.visibleList=this.data.slice(i,n),this.topHeight=e,this.updateTotalHeight()},handleScroll:function(){this.updateVisibleList()}},mounted:function(){this.updateVisibleList()},watch:{data:function(){this.updateVisibleList()}}},x=L,_=(e("d4ef"),Object(u["a"])(x,H,y,!1,null,"519d8b25",null)),V=_.exports,w=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container",staticStyle:{width:"200px",height:"300px"},on:{"&scroll":function(i){return t.handleScroll(i)}}},[e("div",{staticClass:"total-list",style:{height:t.totalHeight+"px"}}),e("div",{staticClass:"visible-list",style:{transform:"translateY("+t.topHeight+"px)"}},t._l(t.visibleList,(function(i){return e("div",{key:i.id,staticClass:"visible-list-item",style:{height:t.itemHeight+"px"}},[t._v(t._s(i.value))])})),0)])},S=[],O={name:"VirtualList",props:{data:{type:Array,default:function(){return[]}},itemHeight:{type:Number,default:30}},data:function(){return{visibleList:[],totalHeight:0,topHeight:0}},methods:{setData:function(t){this.nonReactiveData=t,this.totalHeight=this.itemHeight*t.length,this.updateVisibleList()},updateVisibleList:function(){var t=this.$el.scrollTop,i=Math.ceil(this.$el.clientHeight/this.itemHeight)+1,e=Math.floor(t/this.itemHeight);this.visibleList=this.nonReactiveData.slice(e,e+i),this.topHeight=e*this.itemHeight},handleScroll:function(){this.updateVisibleList()}},mounted:function(){this.nonReactiveData=[],this.updateVisibleList()}},C=O,$=(e("218c"),Object(u["a"])(C,w,S,!1,null,"38e9a5d1",null)),j=$.exports,k=[],D=0;D<1e5;D++)k.push({id:Math.random().toString(36).substr(2),index:D,value:D+1});var P={name:"app",components:{NormalList:d,VirtualList:m,PropHeight:V,VirtualListSetData:j},data:function(){return{data:[],tab:"VirtualListSetData"}},methods:{itemHeightGetter:function(t){return 35+t%5*(Math.random()<.5?-1:1)},setData:function(){this.$refs.list.setData(k)}},watch:{tab:{immediate:!0,handler:function(){var t=this;this.$nextTick((function(){"VirtualListSetData"===t.tab?(t.data=[],t.setData()):t.data=k}))}}}},R=P,M=(e("034f"),Object(u["a"])(R,n,s,!1,null,null,null)),T=M.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(T)}}).$mount("#app")},"85ec":function(t,i,e){},"96f3":function(t,i,e){},a4e9:function(t,i,e){"use strict";var a=e("4575"),n=e.n(a);n.a},d4ef:function(t,i,e){"use strict";var a=e("96f3"),n=e.n(a);n.a},f0db:function(t,i,e){}});
//# sourceMappingURL=app.08a9e77a.js.map